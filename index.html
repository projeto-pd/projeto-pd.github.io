<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!--BOOTSTRAP 5 CSS-->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
    
    <title>As Pontes de Königsberg</title>
    <!--MathJax, Latex in HTML-->
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@4/tex-mml-chtml.js"></script>
    <script src="https://unpkg.com/cytoscape/dist/cytoscape.min.js"></script>

    <style>
        body {
            font-family: sans-serif;
            margin: 0;
            background: #f2f2f2;
        }

        #cy {
            width: 90%;
            height: 60vh;
            display: block;
            margin: 0px auto 15px auto;
        }

        #resetBtn {
            position: relative;
            margin: 15px 15px 0px 15px;
            font-size: 1.5em;
            border: none;
            background: violet;
            border-radius: 6px;
            padding: 4px 10px;
            cursor: pointer;
        }

        #containerP {
            position: relative;
            margin: 0 auto;
        }
    </style>
</head>

<body>
    <!-- Header Decor-->
    <div class="container-fluid py-3" style="background-color: #066017;">
        <div class="row justify-content-center align-items-center">
            <div class="col-2 d-none d-md-block">
                <img src="https://www.ufabc.edu.br/images/conteudo/logo2.png" alt="Universidade Federal do ABC"
                    class="img-fluid" />
            </div>
            <div class="col-6 text-white text-center">
                <h1>Universidade Federal do ABC</h1>
                <h2>As Pontes de Königsberg</h2>
            </div>
        </div>
    </div>

    <!--MAIN CONTAINER-->
    <div class="container p-3 bg-white">
        <div class="row justify-content-center">
            <div class="p-2 col-sm-12 col-md-8 col-lg-7">
                <p>
                    Imagine que você é um turista fotógrafo na Prússia no século XVIII, e seu objetivo é conhecer a cidade de Königsberg e a ilha localizada rio Pregel (imagem abaixo), e para aproveitar o máximo sua viagem e não repetir as fotografias passando por uma mesma ponte duas ou mais vezes, o seguinte desafio surge: É possível passar pelas sete pontes sem passar por alguma delas mais de uma vez?
                </p>

                <figure class="text-center">
                    <img src="./assets/Konigsberg_colour.jpg" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.1 - Pontes de Königsberg
                    </figcaption>
                </figure>

                <p>
                    Esse desafio pode parecer novo, mas sua solução foi elaborada alguns séculos atrás, isso aconteceu no século XVIII, quando o matemático Leonhard Euler visitou a cidade.
                </p>
                <p>
                    Para compreender melhor como isso tudo aconteceu, vamos simplificar o nosso problema e reduzi-lo a um grafo, em seguida, compreenderemos melhor a solução.
                </p>
                <p>
                    Mas afinal, o que é um grafo?
                </p>

                <p class="bg-secondary-subtle px-3">
                    <b>Definição 1:</b> Um <b><a href="#grafo" data-bs-toggle="offcanvas" aria-controls="sidebar"
                            style="color:#066017;">Grafo</a></b> é definido pelo seu conjunto de vértices (pontos) e seu
                    conjunto de arestas (ligações) entre os vértices. Formalmente escreve-se que um grafo G é o par
                    ordenado G=(V, E) onde V é o conjunto de vértices e E é o conjunto de arestas; Visto que as arestas
                    são pares distintos de vértices, diz-se que E \(\subset \binom{|V|}{2} \), isto é, E é alguma parte
                    das combinações dos pontos de V escolhidos dois a dois.
                </p>
                <p>
                    Note que podemos transformar o nosso problema inicial em um grafo, e para isso, tomamos os seguintes passos:
                </p>
                <ol>
                    <li>
                        Identificamos cada pedaço de terra de Königsberg por meio de uma letra, que formarão os vértices do grafo.
                    </li>
                    <li>
                        Se dois pedaços de terra estiverem conectados por uma ponte, ligamos os dois vértices que representam esses pedaços por meio de uma aresta. 
                    </li>
                </ol>

                <figure class="text-center px-5">
                    <img src="./assets/Konigsberg_com_vertices.PNG" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.2 - Königsberg vista como um Grafo
                    </figcaption>
                </figure>
                
                <p>
                    Da forma que foi elaborada, a nossa abstração não se adequa com a nossa definição de grafo, mas é possível corrigir isso com uma <a href="#modTec" data-bs-toggle="offcanvas" aria-controls="sidebar" style="color:#066017;">modificação técnica</a>. Com o grafo feito, o objetivo é: Começando em um vértice, passe por todas as arestas sem repetir nenhuma delas. Você pode tentar fazer isso no seguinte jogo interativo: escolha um vértice para iniciar e então a sequência de arestas até a conclusão do percurso.
                </p>
                <p>
                    Note que o vértice em que o fotógrafo se encontra está amarelo e as arestas já percorridas ficam em vermelho.
                </p>

                <p> Como jogar: Primeiro selecione um vértice inicial, e feito isso, clique nas arestas que deseja atravessar. As
                    arestas em vermelho já foram atravessadas e não podem ser cruzadas novamente, e o vértice em amarelo
                    é a região de Königsberg onde você está no momento.</p>

                <div id="containerP">
                    <button id="resetBtn">↻<br>Reiniciar</button>
                    <div id="cy"></div>
                    <script>
                        let currentNode = null;
                        let usedEdges = new Set();

                        let cy = cytoscape({
                            container: document.getElementById('cy'),
                            userZoomingEnabled: false,
                            userPanningEnabled: false,
                            autoungrabify: true,

                            elements: [
                                // NÓS
                                { data: { id: 'A' }, position: { x: 260, y: 250 } },
                                { data: { id: 'B' }, position: { x: 260, y: 360 } },
                                { data: { id: 'C' }, position: { x: 260, y: 140 } },
                                { data: { id: 'D' }, position: { x: 520, y: 250 } },

                                // ARESTAS (com controle manual das curvas)
                                { data: { id: 'a', source: 'A', target: 'B' }, classes: 'curved' },
                                { data: { id: 'b', source: 'B', target: 'D' }, classes: 'curved' },
                                { data: { id: 'c', source: 'A', target: 'C' }, classes: 'curved' },
                                { data: { id: 'd', source: 'C', target: 'D' }, classes: 'curved' },
                                { data: { id: 'e', source: 'A', target: 'D' }, classes: 'curved' },
                                { data: { id: 'f', source: 'B', target: 'D' }, classes: 'curved' },
                                { data: { id: 'g', source: 'C', target: 'D' }, classes: 'curved' }
                            ],

                            style: [
                                {
                                    selector: 'node',
                                    style: {
                                        'background-color': '#fff',
                                        'border-width': 2,
                                        'border-color': '#000',
                                        'label': 'data(id)',
                                        'width': 40,
                                        'height': 40,
                                        'text-valign': 'center',
                                        'text-halign': 'center',
                                        'font-size': 18
                                    }
                                },
                                {
                                    selector: 'edge',
                                    style: {
                                        'width': 8,
                                        'line-color': 'gray',
                                        'curve-style': 'unbundled-bezier',
                                        'control-point-distances': 100,
                                        'control-point-weights': 0.5,
                                        'font-size': 18,
                                        'text-margin-y': -10
                                    }
                                },
                                {
                                    selector: '.used',
                                    style: {
                                        'line-color': 'red'
                                    }
                                },
                                {
                                    selector: '.currentNode',
                                    style: {
                                        'background-color': 'yellow'
                                    }
                                }
                            ],

                            layout: {
                                name: 'preset',
                                fit: true,
                            }
                        });

                        // Ajustes finos das curvas para parecerem com a imagem:
                        function tweakCurves() {
                            const ctrl = {
                                a: { d: 50 },    // A–B
                                b: { d: -40 },   // B–D
                                c: { d: -50 },   // A–C
                                d: { d: 40 },    // C–D
                                e: { d: 0 },     // A–D
                                f: { d: 40 },    // B–D (segunda)
                                g: { d: -40 }    // C–D (segunda)
                            };

                            for (let id in ctrl) {
                                cy.getElementById(id).style({
                                    'control-point-distances': ctrl[id].d
                                });
                            }
                        }
                        tweakCurves();

                        // --- Lógica do jogo ---

                        // clique em nó
                        cy.on('tap', 'node', evt => {
                            let node = evt.target;

                            if (!currentNode) {
                                currentNode = node.id();
                                cy.$('.currentNode').removeClass('currentNode');
                                node.addClass('currentNode');
                                return;
                            }

                            // trocar para outro nó só é permitido via aresta clicada
                        });

                        // clique em aresta
                        cy.on('tap', 'edge', evt => {
                            let e = evt.target;

                            if (!currentNode) return;

                            let s = e.data('source');
                            let t = e.data('target');

                            if (usedEdges.has(e.id())) return;

                            // só pode atravessar se conectado ao vértice atual
                            if (s === currentNode || t === currentNode) {
                                usedEdges.add(e.id());
                                e.addClass('used');

                                // mover para o próximo nó
                                currentNode = (s === currentNode ? t : s);
                                cy.$('.currentNode').removeClass('currentNode');
                                cy.getElementById(currentNode).addClass('currentNode');
                            }
                        });

                        // botão de reinício
                        document.getElementById('resetBtn').onclick = () => {
                            usedEdges.clear();
                            cy.edges().removeClass('used');
                            cy.nodes().removeClass('currentNode');
                            currentNode = null;
                        };
                    </script>
                </div>

                <p>
                    Esse desafio parece um tanto difícil, não é? Antes de chegarmos a conclusão de Euler acerca desse problema, introduziremos alguns conceitos importantes para formular melhor a conclusão. <br>
                </p>
                <p>
                    Retornando à ideia de grafo, um <b>caminho</b> em um grafo é uma sequência de vértices e arestas \(x_1, a_1, x_2, a_2, \cdots\) onde cada vértice \(x_i\) em um caminho é conectado ao seu sucessor pela aresta ai. Para exemplificar esse conceito, observe o seguinte grafo:
                </p>

                <figure class="text-center px-5">
                    <img src="./assets/Grafo_C.png" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.3 - Exemplo de grafo
                    </figcaption>
                </figure>

                <p>
                    Objetivo: Iniciando no vértice X1, prossiga para o vértice X2 e finalize no vértice X3. Conforme a animação abaixo:
                </p>

                <figure class="text-center px-5">
                    <img src="./assets/animacao_grafo_c.gif" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.4 - Exemplo de caminho
                    </figcaption>
                </figure>

                <p>
                    Podemos representar esse caminho da seguinte forma:
                </p>
                <p>
                    Caminho = \(x_1, a_1, x_2, a_2, x_3\).
                </p>
                <p>
                    Um caminho que percorre todas as arestas de um grafo G, passando por cada aresta apenas uma vez, é chamado de <b>caminho euleriano</b> em G. 
                </p>
                    <b>Exercício:</b> Com o grafo da imagem abaixo, identifique qual dos seguintes caminhos é euleriano:
                </p>

                <figure class="text-center px-5">
                    <img src="./assets/Grafo_C.png" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.3 - Exemplo de grafo
                    </figcaption>
                </figure>

                <p>
                    Caminho 1: \(x_1, a_1, x_2, a_2, x_3, a_3, x_4, a_4, x_1\). <br>
                    Caminho 2: \(x_1, a_1, x_2, a_6, x_4, a_6, x_2, a_2, x_3, a_3, x_4, a_4, x_1\). <br>
                    Caminho 3: \(x_1, a_1, x_2, a_2, x_3, a_3, x_4, a_5, x_2, a_6, x_4, a_4, x_1\).
                </p>
                <div class="accordion mb-3" id="resposta">
                    <div class="accordion-item">
                        <h2 class="accordion-header" id="coisa">
                            <button class="accordion-button collapsed" type="button"
                                    data-bs-toggle="collapse" data-bs-target="#resp"
                                    aria-expanded="false" aria-controls="resp">
                                Clique aqui para ver a resposta
                            </button>
                        </h2>
                
                        <div id="resp" class="accordion-collapse collapse"
                             aria-labelledby="coisa" data-bs-parent="#resposta">
                            <div class="accordion-body">
                                <p>A resposta correta é o caminho 3.</p>
                                <p>O caminho 1 não passa pelas arestas \(a_5\) e \(a_6\). Enquanto o caminho 2, além de não passar por \(a_5\), ele também repete a aresta \(a_6\). Logo, nenhum dos dois caminhos são eulerianos.</p>
                                <figure class="text-center">
                                    <img src="./assets/animacao_resolucao.gif" class="img-fluid mt-2 mb-4">
                                    <figcaption class="text-center text-white bg-dark ms-5 me-5">
                                        Fig.5 - Caminho euleriano
                                    </figcaption>
                                </figure>
                            </div>
                        </div>
                    </div>
                </div>
                

                <p>
                    Além disso, dizemos que um grafo é conexo se podemos encontrar um caminho conectando quaisquer dois vértices. <br>
                </p>
                <p>
                    Conhecendo esses conceitos, o problema inicial se resume a encontrarmos um caminho euleriano para o grafo inicial. Esse caminho existe? Se sim, como encontrá-lo? <br>
                </p>
                <p>    
                    O matemático Leonhard Euler chegou a conclusão que não existe um caminho euleriano para o grafo representando Königsberg. A razão é dada pelo seguinte teorema:
                </p>

                <div class="container bg-secondary-subtle px-3">
                    <p><b>Teorema:</b> Um grafo conexo admite um caminho euleriano se, e somente se, existem exatamente zero ou dois vértices com um número ímpar de arestas saindo deles.</p>
                    <p>Em outras palavras, se dados dois vértices em um grafo sempre existe um caminho conectando os dois, então existe um caminho euleriano exatamente quando existem apenas zero ou dois vértices com um número ímpar de arestas saindo deles.</p>
                </div>

                <p>
                    No grafo representando Königsberg, todos quatro vértices têm grau ímpar, então o teorema nos diz que não existe um caminho euleriano no grafo! </p>
                <p> 
                    Vale comentar que Euler, em 1736, não estabeleceu o critério completo. Ele mostrou apenas que, se um caminho euleriano existe, então necessariamente o grafo é conexo e possui exatamente zero ou dois vértices com um número ímpar de arestas saindo deles. A recíproca (se um grafo é conexo e existem exatamente zero ou dois vértices com um número ímpar de arestas saindo deles, então existe um caminho euleriano) permaneceu sem demonstração por mais de um século, até que Carl Hierholzer apresentou uma demonstração em 1873 (DIESTEL, 2017).
                </p>
                <p>
                    Resolvido o problema, conclui-se que o fotógrafo teve as suas intenções iniciais frustradas, pois necessariamente haverá ao menos uma foto repetida. Por outro lado, compreendemos melhor qual era o problema das sete pontes de Königsberg, o que é um grafo e os conceitos relacionados (caminho, caminho euleriano e grafo conexo), transformamos o problema inicial em um grafo e entendemos a solução proposta por Euler. E além disso, esse problema gerou uma nova área na matemática: a teoria dos grafos.
                </p>
                <p>
                    Hoje, a teoria dos grafos é uma área de pesquisa ativa na matemática, encontrando aplicações nas mais diversas áreas do conhecimento, como a ciência da computação e a engenharia elétrica, com aplicações que vão desde algoritmos como o Pagerank, algoritmo de busca original do Google, até o estudo da confiabilidade de redes elétricas.
                </p>
                <p>    
                    <b>Curiosidades</b>
                </p>

                <ul>
                    <li>No Centro de Matemática, Computação e Cognição (CMCC) UFABC temos professores especializados em Teoria de Grafos, com muitos deles no laboratório de Teoria da Computação, Otimização, Combinatória e Algoritmos, que é mais conhecido como TOCA;</li>
                    <li>Atualmente, em Kaliningrado (antiga Königsberg), apenas duas das pontes existentes na época de Euler permanecem de pé. As demais desapareceram por diferentes razões: duas foram demolidas para dar lugar a uma via expressa, duas foram destruídas durante os bombardeios da Segunda Guerra Mundial e outra foi reconstruída em 1935.</li>
                    <li>É possível realizar um caminho euleriano no arranjo atual das pontes!</li>
                </ul>

                <figure class="text-center">
                    <img src="./assets/solucaoAtual.jpg" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.6 - Solução possível atual
                    </figcaption>
                </figure>

                <p>Finalizamos esta apresentação com um desafio: você consegue desenhar a figura abaixo sem levantar o lápis e sem sobrescrever qualquer linha? </p>

                <figure class="text-center">
                    <img src="./assets/Desafio.drawio.png" class="img-fluid mt-2 mb-4">
                    <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.7 - Desafio
                    </figcaption>
                </figure>
                
                <h3>Referências</h3>
                <ul>
                    <li>BOLLOBÁS, Béla. Modern Graph Theory. New York: Springer, 1998. (Graduate Texts in Mathematics,
                        184).</li>
                    <li>DIESTEL, Reinhard. Graph Theory. 5. ed. Berlin: Springer, 2017. (Graduate Texts in Mathematics,
                        173).</li>
                    <li>EULER, Leonhard. Solution of a problem in the geometry of position. Traduzido para o inglês por
                        Michael Behrend. <a style="word-wrap: break-word;"
                            href="https://www.cantab.net/users/michael.behrend/repubs/maze_maths/pages/euler_en.html">cantab.net/users/michael.behrend/repubs/maze_maths/pages/euler_en.html</a>.
                        Acesso em: 05/11/2025.</li>
                    <li>MAO, Linfan. Graphs, Networks and Natural Reality – from Intuitive Abstracting to Theory.
                        International Journal of Mathematical Combinatorics, Vol. 4, 2019.</li>
                </ul>
            </div>
        </div>
    </div>

    <!--Créditos e Agradecimentos-->
    <div class="container-fluid">
        <div class="row justify-content-center bg-black text-white text-center p-3">
            <div class="col-md-5">
                <h3>Créditos</h3>
                <p>
                    Alice Micheloni de Souza<br>
                    Eduardo Rodrigues Furlan de Mello<br>
                    Guilherme Afonso Gigeck<br>
                    Leonardo Helvecio de Oliveira Vidal
                </p>
            </div>
            <div class=col-md-5>
                <h3>Agradecimentos</h3>
                <p>
                    Professor Vinicius de Andrade Oliveira
                </p>
            </div>
        </div>
    </div>

    <!--Off Canvanses-->

    <div class="offcanvas offcanvas-end" tabindex="-1" id="grafo" aria-labelledby="grafo-label">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="grafo-label">Grafos</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <p>
                Aqui estão alguns exemplos visuais de grafos, onde os vértices foram identificados pelos números de 1 à
                4 podendo-se dizer que os números são os vértices. Perceba que para o grafo, não importa caso a
                representações de suas arestas se cruzem, mantenha em mente bem claro que as ligações são apenas entre
                pares de vértices. Tente justificar por conta própria que os exemplos 1 e 3 são, na verdade, o mesmo
                grafo só que desenhados de maneiras diferente!
            </p>
            <figure class="text-center">
                <img src="./assets/Grafos.drawio.png" class="img-fluid mt-2 mb-4">
                <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.A1 - Exemplos de Grafos</figcaption>
            </figure>
            <p>
               Agora, alguns grafos vêm com restrições. Nos <b>grafos simples</b>, não permitimos laços — isto é, nenhuma aresta pode começar e terminar no mesmo vértice. Também não permitimos mais de uma aresta entre o mesmo par de vértices; entre dois vértices há, portanto, no máximo uma aresta.
Essas condições fazem parte da própria definição de grafo simples.
Entretanto, como sempre existem exceções, o problema estudado por Euler — que veremos adiante — viola a segunda condição, pois envolve múltiplas arestas entre os mesmos vértices.
A seguir, alguns exemplos de estruturas que não se enquadram na definição de grafo simples apresentada.
            </p>
            <figure class="text-center">
                <img src="./assets/NaoGrafos.drawio.png" class="img-fluid mt-2 mb-4">
                <figcaption class="text-center text-white bg-dark ms-5 me-5">Fig.A1 - Exemplos de Não-Grafos
                </figcaption>
            </figure>
        </div>
    </div>

    <div class="offcanvas offcanvas-end" tabindex="-1" id="modTec" aria-labelledby="modTec-label">
        <div class="offcanvas-header">
            <h5 class="offcanvas-title" id="modTec-label">Grafo Modificado</h5>
            <button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
            <p>
                A principal característica que impede nossa abstração inicial de ser considerada um 
                <strong>grafo simples</strong> é a presença de <em>arestas paralelas</em>, isto é, dois ou mais vínculos 
                distintos entre o mesmo par de vértices \(v_1\) e \(v_2\). Para tratar corretamente situações 
                desse tipo, como no problema estudado por Euler, é conveniente que as arestas sejam 
                objetos independentes dos pares de vértices.
                </p>
                
                <p>
                Com essa ideia, definimos um grafo atribuindo a cada aresta o par de vértices que ela 
                conecta por meio de uma função apropriada. A definição fica então:
                </p>
                
                <div class="bg-secondary-subtle px-3">
                <p><strong>Definição 1.1.</strong>  
                Um grafo é determinado pelo conjunto de vértices \(V\), pelo conjunto de arestas \(E\) 
                e por uma função de incidência. Formalmente, um grafo é a tripla ordenada
                \[
                    G = (V, E, f),
                \]
                na qual \(V\) é o conjunto de vértices, \(E\) é o conjunto de arestas, e
                \[
                    f : E \to \binom{V}{2}
                \]
                associa a cada aresta o par <em>não ordenado</em> de vértices que ela conecta.
                </p>
                </div>
                
                <p>
                Essa escolha evita problemas de orientação: como utilizamos pares não ordenados, 
                não há diferença entre \(\{v_1,v_2\}\) e \(\{v_2,v_1\}\). Além disso, permite que existam 
                arestas distintas \(e_1 \neq e_2\) com a mesma incidência,
                \[
                    f(e_1) = f(e_2),
                \]
                o que representa naturalmente arestas paralelas.
                </p>
        </div>
    </div>
    <!--BOOTSTRAP 5 JS-->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI"
        crossorigin="anonymous"></script>
</body>

</html>
